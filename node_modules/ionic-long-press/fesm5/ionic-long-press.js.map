{"version":3,"file":"ionic-long-press.js","sources":["ng://ionic-long-press/directives/long-press.directive.ts","ng://ionic-long-press/long-press.module.ts","ng://ionic-long-press/ionic-long-press.ts"],"sourcesContent":["import { Directive, ElementRef, EventEmitter, Input, NgZone, OnDestroy, OnInit, Output } from '@angular/core';\nimport * as Hammer from 'hammerjs';\n\n// const LONG_PRESS_DEFAULT_TIMEOUT = 500;\n\n// const MIN_LONG_PRESS_TIMEOUT = 40;\n\n@Directive({\n  selector: '[ion-long-press]',\n})\nexport class LongPressDirective implements OnInit, OnDestroy {\n\n  @Input() interval: number;\n\n  @Output() pressed: EventEmitter<any> = new EventEmitter();\n  @Output() longPressed: EventEmitter<any> = new EventEmitter();\n  @Output() pressEnded: EventEmitter<any> = new EventEmitter();\n\n  private readonly el: HTMLElement;\n  private _hammer: HammerManager;\n  private int: number;\n\n  constructor(public zone: NgZone,\n              el: ElementRef) {\n    this.el = el.nativeElement;\n  }\n\n  ngOnInit(): void {\n    if (!this.interval) this.interval = 500;\n    if (this.interval < 40) {\n        throw new Error('A limit of 40ms is imposed so you don\\'t destroy device performance. If you need less than a 40ms interval, please file an issue explaining your use case.');\n    }\n\n    this._hammer = new Hammer.Manager(this.el, {\n      recognizers: [\n        [Hammer.Pan, {direction: Hammer.DIRECTION_VERTICAL}],\n        [Hammer.Press],\n        [Hammer.Tap],\n      ],\n    });\n\n    this._hammer.on('pan', (e: any) => {\n      this.onPressEnd();\n    });\n\n    this._hammer.on('press', (e: any) => {\n      this.pressed.emit(e);\n      this.clearInt();\n      this.int = setInterval(() => {\n        this.longPressed.emit();\n      }, this.interval) as any;\n    });\n\n    this._hammer.on('pressup', (e: any) => {\n      this.onPressEnd();\n    });\n\n    this._hammer.on('release', (e: any) => {\n      this.onPressEnd();\n    });\n\n    this.el.addEventListener('mouseleave', (e: any) => {\n      this.onPressEnd();\n    });\n\n    this.el.addEventListener('mouseout', (e: any) => {\n      this.onPressEnd();\n    });\n  }\n\n  clearInt(): void {\n    if (this.int !== undefined) {\n        clearInterval(this.int);\n        this.int = undefined;\n    }\n  }\n\n  onPressEnd(): void {\n    this.clearInt();\n    this.pressEnded.emit();\n  }\n\n  ngOnDestroy(): void {\n    this.onPressEnd();\n    if (this._hammer) {\n      this._hammer.destroy();\n      this._hammer = null;\n    }\n  }\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { LongPressDirective } from './directives/long-press.directive';\n\n@NgModule({\n    imports: [\n        CommonModule\n    ],\n    declarations: [LongPressDirective],\n    exports: [LongPressDirective]\n})\nexport class LongPressModule { }\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"],"names":["Hammer.Manager","Hammer.Pan","Hammer.DIRECTION_VERTICAL","Hammer.Press","Hammer.Tap","tslib_1.__decorate"],"mappings":"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"}